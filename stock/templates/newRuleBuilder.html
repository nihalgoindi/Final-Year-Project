{% extends 'base.html' %}
{% block title %}NEW Rule Builder{% endblock %}



{% block content %}

{% if not user.is_authenticated %}
<div class="alert alert-warning alert-dismissible fade show  mr-4 ml-4" role="alert">
    You need to <a class="linkc alert-link text-light-thick" href="{% url 'login' %}">Login</a> or <a
        class="linkc alert-link text-light-thick" href="{% url 'signup' %}">Register</a> to save rules and strategies
    permanently.
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}

<div class="row ml-2 mr-1">
    <a class="btn btn-outline-secondary col-sm-4" href="{% url 'viewMLData' %}" target="_blank">View Saved Data</a>
</div>

<div>
    <h3>Rule Builder</h3>
    <div id="blocklyDiv" style="height: 480px; width: 1000px;"></div>
        <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
            <category name="Rule Frame">
                <block type="rule_frame">
                    <field name="NAME">Enter a rule name...</field>
                    <statement name="RuleBody">
                        <block type="if_then"></block>
                    </statement>
                </block>
            </category>
            <category name="Comparator">
                <block type="comparators">
                    <field name="NAME">EQ</field>
                </block>
            </category>
            <category name="Indicator">
                <block type="indicators">
                    <field name="indicator">SMA</field>
                </block>
            </category>
            <category name="Connector">
                <block type="logic_operation">
                    <field name="OP">AND</field>
                </block>
            </category>
            <category name="Final">
                <block type="buy"></block>
                <block type="sell"></block>
            </category>
        </xml>
        <xml xmlns="https://developers.google.com/blockly/xml" id="workspaceBlocks" style="display: none"></xml>
    </div>
</div>




<!-- RuleBuilder JS-->
{% load static%}

<script type="text/javascript" src="{% static 'blockly/blockly_compressed.js' %}"></script>
<script type="text/javascript" src="{% static 'blockly/blocks_compressed.js' %}"></script>
<script type="text/javascript" src="{% static 'blockly/msg/js/en.js' %}"></script>
<script type="text/javascript" src="{% static 'js/newRuleBuilder.js' %}"></script>

{% endblock %}